<div class="center">
  <h1>WCA Competition Certificates</h1>
  <div class="centered" >
  
  <!-- LOGIN -->
    <div *ngIf="! apiService.oauthToken">
      <button class="login" (click)="handleLoginToWca()">First: login</button><br>
    </div>

  <!-- SELECT COMP -->
    <div *ngIf="apiService.oauthToken && ! competitionId">
      <p>Welcome!</p>
      <p *ngIf="competitionsToChooseFrom">Select a competition:</p>
      <p *ngFor="let competitionId of competitionsToChooseFrom">
        <button class="competition" (click)="handleCompetitionSelected(competitionId)">{{competitionId}}</button>
      </p>
      <p *ngIf="!!competitionsToChooseFrom && competitionsToChooseFrom.length === 0">You don't have any competition available :-(</p>
    </div>

  <!-- INFORMATION ABOUT COMP AND PRINTING -->
    <div *ngIf="competitionId && wcif && state === 'PRINT'">
      <p> Selected competition: {{ competitionId }}<br><br>
      <button (click)="printEmptyCertificate()"
        >Empty certificate for {{ competitionId }}</button><br><br>
      {{ events?.length }} events found:</p>
      
      <table>
      <tr *ngFor="let event of wcif.events">
        <td><input type="checkbox" [(ngModel)]="event.printCertificate"></td>
        <td>{{ printService.getEvent(event.id)?.label }}</td>
        <td>{{ getWarningIfAny(event.id) }}</td>
      </tr>
      </table><br>
      <button (click)="state = 'EDIT'">Customize text and styling</button><br><br>
      <button (click)="printCertificates()"
        [disabled]="buttonDisabled()">Download pdf</button><br><br>
      <a href='https://drive.google.com/open?id=1wGd7Ijc3cU8xbO4s39jy5qQU8hylMRda' target="_blank">Example background</a>
    </div>
    
  <!-- CUSTOMIZE TEXT AND STYLING -->
    <div *ngIf="competitionId && wcif && state === 'EDIT'">
      <textarea [(ngModel)]="printService.templateJson"></textarea><br>
      <button (click)="state = 'PRINT'">Go back to printing</button>
    </div>
    
  </div>
</div>

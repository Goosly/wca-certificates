<div class="center">
  <h1>WCA Competition Certificates</h1>
  <div class="centered" >
  
  <!-- LOGIN -->
    <div *ngIf="! apiService.oauthToken">
      <button class="login" (click)="handleLoginToWca()">First: login</button><br>
    </div>

  <!-- SELECT COMP -->
    <div *ngIf="apiService.oauthToken && ! competitionId">
      <p>Welcome!</p>
      <p *ngIf="competitionsToChooseFrom">Select a competition:</p>
      <p *ngFor="let competitionId of competitionsToChooseFrom">
        <button class="competition" (click)="handleCompetitionSelected(competitionId)">{{competitionId}}</button>
      </p>
      <p *ngIf="!!competitionsToChooseFrom && competitionsToChooseFrom.length === 0">You don't have any competition available :-(</p>
    </div>

  <!-- INFORMATION ABOUT COMP -->
    <div *ngIf="competitionId && wcif">
      <p> Selected competition: {{ competitionId }}<br>
      {{ events?.length }} events found!</p>
      
      <table>
      <!-- todo use checkboxes -->
      <tr *ngFor="let event of wcif.events">
        <td><input type="checkbox" [(ngModel)]="event.printCertificate"></td>
        <td>{{ printService.getEvent(event.id)?.label }}</td>
      </tr>
      </table>
      <button class="print" (click)="printCertificates()"
        [disabled]="buttonDisabled()">Download pdf</button>
    </div>
    
  </div>
</div>
